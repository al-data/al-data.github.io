var ENodeType={SMALL_RECON:1,MEDIUM_RECON:2,LARGE_RECON:3,SMALL_MAINFLEET:4,MEDIUM_MAINFLEET:5,LARGE_MAINFLEET:6,SMALL_CARRIER:7,MEDIUM_CARRIER:8,LARGE_CARRIER:9,SMALL_TRANSPORT:10,MEDIUM_TRANSPORT:11,LARGE_TRANSPORT:12,SIREN:98,BOSS:99,props:{1:{name:"",diffIcon:"xiao"},2:{name:"",diffIcon:"zhong"},3:{name:"",diffIcon:"da"},4:{name:"",diffIcon:"xiao"},5:{name:"",diffIcon:"zhong"},6:{name:"",diffIcon:"da"},7:{name:"",diffIcon:"xiao"},8:{name:"",diffIcon:"zhong"},9:{name:"",diffIcon:"da"},10:{name:"",diffIcon:"xiao"},11:{name:"",diffIcon:"zhong"},12:{name:"",diffIcon:"da"},98:{name:"",diffIcon:""},99:{name:"",diffIcon:""}}},MAP_TYPE=[{name:"World",key:"W"}],CHAPTERS={W:["1","2","3","4","5","6","7","8","9","10","11","12","13"],E:[]},WORLD_SUB_CHAPTERS={1:["1","2","3","4","1-HM","2-HM","3-HM","4-HM"],2:["1","2","3","4","1-HM","2-HM","3-HM","4-HM"],3:["1","2","3","4","1-HM","2-HM","3-HM","4-HM"],4:["1","2","3","4","1-HM","2-HM","3-HM","4-HM"],5:["1","2","3","4","1-HM","2-HM","3-HM","4-HM"],6:["1","2","3","4","1-HM","2-HM","3-HM","4-HM"],7:["1","2","3","4","1-HM","2-HM","3-HM","4-HM"],8:["1","2","3","4","1-HM","2-HM","3-HM","4-HM"],9:["1","2","3","4","1-HM","2-HM","3-HM","4-HM"],10:["1","2","3","4"],11:["1","2","3","4"],12:["1","2","3","4"],13:["1","2","3","4"],Kizuna:["SP1","SP2","SP3","SP4","Black-SP","EX"],Iris:["A1","A2","A3","B1","B2","B3","C1","C2","C3","D1","D2","D3","EX"],Scherzo:["A1","A2","A3","B1","B2","B3","C1","C2","C3","D1","D2","D3","SP","EX"]},WORLD_DB_INDEX={1:["101","102","103","104","10101","10102","10103","10104"],2:["201","202","203","204","10201","10202","10203","10204"],3:["301","302","303","304","10301","10302","10303","10304"],4:["401","402","403","404","10401","10402","10403","10404"],5:["501","502","503","504","10501","10502","10503","10504"],6:["601","602","603","604","10601","10602","10603","10604"],7:["701","702","703","704","10701","10702","10703","10704"],8:["801","802","803","804","10801","10802","10803","10804"],9:["901","902","903","904","10901","10902","10903","10904"],10:["1001","1002","1003","1004"],11:["1101","1102","1103","1104"],12:["1201","1202","1203","1204"],13:["1301","1302","1303","1304"],Kizuna:["1220001","1220002","1220003","1220004","1220005","1220021"],Iris:["1140001","1140003","1140004","1140011","1140013","1140014","1140005","1140007","1140008","1140015","1140017","1140018","1140021"],Scherzo:["1230001","1230002","1230003","1230004","1230005","1230006","1230011","1230012","1230013","1230014","1230015","1230016","1230017","1230021"]};function populateMapTypeDrop(){$("#dropMapType").children().remove().end();for(let a=0;a<MAP_TYPE.length;a++)$("#dropMapType").append("<option value='"+MAP_TYPE[a].key+"'>"+MAP_TYPE[a].name+"</option>");let a=$("#dropMapType").val();populateChapterDrop(a)}function populateChapterDrop(a){if($("#dropChapter").children().remove().end(),$("#dropSubChapter").children().remove().end(),!!(a in CHAPTERS)){let b=CHAPTERS[a];for(let a=0;a<b.length;a++)$("#dropChapter").append("<option value='"+b[a]+"'>"+b[a]+"</option>");let c=$("#dropChapter").val();populateSubChapterDrop(c)}}function populateSubChapterDrop(a){if($("#dropSubChapter").children().remove().end(),!!(a in WORLD_SUB_CHAPTERS)){let b=WORLD_SUB_CHAPTERS[a];for(let a=0;a<b.length;a++)$("#dropSubChapter").append("<option value='"+a+"'>"+b[a]+"</option>")}}var WAVE_DB={};const Node=({expedId:a,level:b,bgIcon:c,diff:d,hasDiff:e,bossIcon:f,hasBossIcon:g})=>`
            <div class="node cloudy-gradient m-2 border rounded-lg shadow p-2 border-dark" style="width:125px; height:125px;">
                <a style="color:black;" href="/exped?id=${a}">
                    <div style="position:relative;">
                        <img style="width:100%;" src="img/nodes/${c}.png" />
                        ${e?`<div style="position:absolute; bottom:0; right:0; width:40px; height:auto; border:0px solid black;">
                            <img style="width:100%;" src="img/nodes/${d}.png" />
                         </div>`:``}
                        ${g?`<div style="position:absolute; bottom:0; right:0; margin:auto; width:80px; height:auto; border:0px solid black;">
                            <img style="width:100%;" src="img/nodes/${f}.png" />
                        </div>`:``}   
                        <div style="position:absolute; top:0; left:0px; width:auto; height:auto; border:1px solid #666666; padding:1px; padding-left:5px; padding-right:5px; border-radius:6px; background:#FFFFFF">
                            Lv.${b}
                        </div>
                    </div>
                </a>
            </div>
        `;function loadCurrent(){let a=$("#dropChapter").val(),b=$("#dropSubChapter").val();loadWaves(WORLD_DB_INDEX[a][b])}function init(){let a=loadDb();a.then(function(){populateMapTypeDrop(),loadCurrent(),$("#dropMapType").on("change",function(){let a=$("#dropMapType").val();populateChapterDrop(a),loadCurrent()}),$("#dropChapter").on("change",function(){let a=$("#dropChapter").val();populateSubChapterDrop(a),loadCurrent()}),$("#dropSubChapter").on("change",function(){loadCurrent()}),$("#btnSearch").click(function(){let a=$("#dropChapter").val(),b=$("#dropSubChapter").val();loadWaves(WORLD_DB_INDEX[a][b])})})}function loadDb(){var a=$.getJSON("../data/wave-db.json",function(a){WAVE_DB=a});return Promise.all([a])}function loadWaves(a){if(!(a in WAVE_DB.chapter))return[];let b=WAVE_DB.chapter[a],c=b.ambushExpeds,d=b.simpExpeds,e=[],f=[],g=[];for(let b,h=0;h<d.length;h++){b=WAVE_DB.expeds[d[h]],e.push(b);let a=ENodeType.props[b.type],i={expedId:parseInt(b.id),level:b.level,bgIcon:b.icon,diff:a.diffIcon,hasDiff:""!=a.diffIcon,bossIcon:"enemy_boss",hasBossIcon:b.type==ENodeType.BOSS};c.includes(b.id)?g.push(i):f.push(i)}$(".container").html(f.map(Node).join("")),$(".ambushes").html(g.map(Node).join(""))}