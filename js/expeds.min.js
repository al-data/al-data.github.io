var WAVE_DB={};function loadDb(){var t=$.getJSON("../data/wave-db.json",function(t){WAVE_DB=t});return Promise.all([t])}var WAVE_LIST=[],WAVE_DICT={};function loadWaves(t){WAVE_LIST=[],WAVE_DICT={};let s=loadDungeon(t.dungeon),i=s.waveList,a=s.waveIds;for(let s=0;s<a.length;s++){let e=a[s],n=i[e],r=new Wave(e,t.level);r.fromData(n),n.triggerType==EWaveTriggerType.NORMAL&&(r.idx=WAVE_LIST.length+1,WAVE_LIST.push(r)),WAVE_DICT[e]=r}for(let t=0;t<WAVE_LIST.length;t++)WAVE_LIST[t].loadConditions(WAVE_DICT)}const TPL_TITLE=({chName:t,expedName:s})=>`<h1 class="hTitle">${t} \t ${s}</h1>`,TPL_HEADER=({text:t})=>`<h2>${t}</h2>`,TPL_SUB_HEADER=({text:t})=>`<h3>${t}</h3>`,ENEMY_TABLE_TMPL=({waveId:t,rows:s})=>`<table id="wave_${t}" class="table table-striped table-bordered dataTable no-footer" style="width:100%">\n                    <thead>\n                            <tr role="row">\n                                <th class="sorting_asc" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Icon: activate to sort column descending" style="width: 27px;">Icon</th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 101px;">\n                                    <div style="width:100px;">Name</div>\n                                </th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label="Level: activate to sort column ascending" style="width: 33px;">Level</th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label=": activate to sort column ascending" style="width: 29px;">\n                                    <img src="img/attr/hp.png" style="width: 30px;">\n                                </th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label=": activate to sort column ascending" style="width: 33px;">\n                                    <img src="img/attr/armor.png" style="width: 30px;">\n                                </th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label=": activate to sort column ascending" style="width: 29px;">\n                                    <img src="img/attr/fp.png" style="width: 30px;">\n                                </th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label=": activate to sort column ascending" style="width: 29px;">\n                                    <img src="img/attr/torp.png" style="width: 30px;">\n                                </th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label=": activate to sort column ascending" style="width: 29px;">\n                                    <img src="img/attr/air.png" style="width: 30px;">\n                                </th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label=": activate to sort column ascending" style="width: 29px;">\n                                    <img src="img/attr/aa.png" style="width: 30px;">\n                                </th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label=": activate to sort column ascending" style="width: 29px;">\n                                    <img src="img/attr/eva.png" style="width: 30px;">\n                                </th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label="Hit: activate to sort column ascending" style="width: 18px;">Hit</th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label="Luck: activate to sort column ascending" style="width: 30px;">Luck</th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label=" Priority: activate to sort column ascending" style="width: 69px;">\n                                    <div style="">\n                                        Prio\n                                    </div>\n                                </th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label="Notes: activate to sort column ascending" style="width: 74px;">\n                                    <div style="width:60px;" >Notes</div>\n                                </th>\n                            </tr>\n                    </thead>\n                    <tbody>\n                        ${s}\n                        \x3c!-- <tr role="row">\n                            <td class="sorting_1">\n                                <div style="width:40px; height:40px;">\n                                    <img src="img/enemy-icons/birui.png" style="width:40px;">\n                                </div>\n                            </td>\n                            <td>Hiei</td>\n                            <td>60</td>\n                            <td>7214</td>\n                            <td>Medium</td>\n                            <td>352</td>\n                            <td>0</td>\n                            <td>0</td>\n                            <td>\n                                <a href="#" class="material-tooltip-main" style="border-bottom: 1px dashed;" data-toggle="tooltip" title="56.14% air resistance">192</a>\n                            </td>\n                            <td>5</td>\n                            <td>26</td>\n                            <td>0</td>\n                            <td>65</td>\n                            <td>-</td>\n                        </tr>\n                        <tr role="row">\n                            <td class="sorting_1">\n                                <div style="width:40px; height:40px;">\n                                    <img src="img/enemy-icons/ruihe.png" style="width:40px;">\n                                </div>\n                            </td>\n                            <td>Zuikaku</td>\n                            <td>60</td>\n                            <td>5989</td>\n                            <td>Medium</td>\n                            <td>0</td>\n                            <td>0</td>\n                            <td>257</td>\n                            <td>\n                                <a href="#" class="material-tooltip-main" style="border-bottom: 1px dashed;" data-toggle="tooltip" title="57.51% air resistance">203</a>\n                            </td>\n                            <td>9</td>\n                            <td>26</td>\n                            <td>0</td>\n                            <td>70</td>\n                            <td>-</td>\n                        </tr> --\x3e\n                    </tbody>\n                </table>`,AIRCRAFT_TABLE_TMPL=({waveId:t,rows:s})=>`<table id="wave_${t}" class="table table-striped table-bordered dataTable no-footer" style="width:100%">\n                    <thead>\n                            <tr role="row">\n                                <th class="sorting_asc" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Icon: activate to sort column descending" style="width: 27px;">Icon</th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label=": activate to sort column ascending" style="width: 29px;">\n                                    Qty\n                                </th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label="Level: activate to sort column ascending" style="width: 33px;">Level</th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label=": activate to sort column ascending" style="width: 29px;">\n                                    <img src="img/attr/hp.png" style="width: 30px;">\n                                </th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label=": activate to sort column ascending" style="width: 29px;">\n                                    Crash\n                                </th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label=": activate to sort column ascending" style="width: 29px;">\n                                    <img src="img/attr/air.png" style="width: 30px;">\n                                </th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label=": activate to sort column ascending" style="width: 29px;">\n                                    <img src="img/attr/aa.png" style="width: 30px;">\n                                </th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label="Hit: activate to sort column ascending" style="width: 18px;">Hit</th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label="Luck: activate to sort column ascending" style="width: 30px;">Luck</th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label="Notes: activate to sort column ascending" style="width: 60px;">\n                                    Speed\n                                </th>\n                                <th class="sorting" tabindex="0" aria-controls="dtBasicExample" rowspan="1" colspan="1" aria-label="Notes: activate to sort column ascending" style="width: 74px;">\n                                    Notes\n                                </th>\n                            </tr>\n                    </thead>\n                    <tbody>\n                        ${s}\n                    </tbody>\n                </table>`,AIRCRAFT_ROW=({icon:t,num:s,lvl:i,hp:a,crash:e,avi:n,airRed:r,aa:o,hit:l,luck:h,speed:d,notes:c})=>`<tr role="row">\n                <td class="sorting_1">\n                    <div style="width:40px; height:40px;">\n                        <img src="${t}" style="width:40px;">\n                    </div>\n                </td>\n                <td>${s}</td>\n                <td>${i}</td>\n                <td>${a}</td>\n                <td>${e}</td>\n                <td>${n}</td>\n                <td>\n                    <div class="material-tooltip-main" style="width:fit-content; border-bottom: 1px dashed;" data-toggle="tooltip" title="${r}% air resistance">${o}</div>\n                </td>\n                <td>${l}</td>\n                <td>${h}</td>\n                <td>${d}</td>\n                <td>${c}</td>\n            </tr>`,ENEMY_ROW=({icon:t,name:s,lvl:i,hp:a,armor:e,fp:n,torp:r,avi:o,aa:l,eva:h,hit:d,luck:c,prio:p,notes:g,airRed:A})=>`<tr role="row">\n                <td class="sorting_1">\n                    <div style="width:40px; height:40px;">\n                        <img src="${t}" style="width:40px;">\n                    </div>\n                </td>\n                <td>${s}</td>\n                <td>${i}</td>\n                <td>${a}</td>\n                <td>${e}</td>\n                <td>${n}</td>\n                <td>${r}</td>\n                <td>${o}</td>\n                <td>\n                    <div class="material-tooltip-main" style="width:fit-content; border-bottom: 1px dashed;" data-toggle="tooltip" title="${A}% air resistance">${l}</div>\n                </td>\n                <td>${h}</td>\n                <td>${d}</td>\n                <td>${c}</td>\n                <td>${p}</td>\n                <td style="white-space: pre-line;">${g}</td>\n            </tr>`,ENEMY_ICON=({icon:t})=>`<div style="width:40px; height:40px;">\n        <img src="img/enemy-icons/${t}.png" style="width:40px;">\n    </div>`,CONDITION_ALERT=({waves:t,time:s})=>`<div class="alert alert-secondary" role="alert">\n        <b>Condition:</b>\n        ${null!=t?`Clear wave(s) ${t}`:""}   \n        ${null!=t&&-1!=s?" <b>OR</b> ":""}\n        ${-1!=s?`${s} seconds elapsed`:""}\n    </div>`;function createExpedPage(t){let s=parseInt(t.id.toString().slice(0,-3)),i="";s in WAVE_DB.chapter&&(i=WAVE_DB.chapter[s].chName),$("#container").append(TPL_TITLE({chName:i,expedName:t.name})),console.log(t);for(let t=0;t<WAVE_LIST.length;t++){let s=WAVE_LIST[t],i=s.getEnemyRows();if($("#container").append(TPL_HEADER({text:"Wave "+s.idx})),$("#container").append(`<div class="divWave" id="wave_${s.idx}"></div>`),0!=t){let t=s.getConditions(),i=t.waves.join(", ");-1==t.time&&""==i||$("#wave_"+s.idx).append(CONDITION_ALERT({waves:""!=i?i:null,time:t.time}))}$("#wave_"+s.idx).append(TPL_SUB_HEADER({text:"Spawns"})),$("#wave_"+s.idx).append(ENEMY_TABLE_TMPL({waveId:"sp_"+s.idx,rows:i})),$("#wave_sp_"+s.idx).DataTable({paging:!1,searching:!1,info:!1});let a=s.getReinfRows();a.length>0&&($("#wave_"+s.idx).append(TPL_SUB_HEADER({text:"Reinforcements"})),$("#wave_"+s.idx).append(ENEMY_TABLE_TMPL({waveId:"rf_"+s.idx,rows:a})),$("#wave_rf_"+s.idx).DataTable({paging:!1,searching:!1,info:!1}));let e=s.getAirRows();e.length>0&&($("#wave_"+s.idx).append(TPL_SUB_HEADER({text:"Aircraft"})),$("#wave_"+s.idx).append(AIRCRAFT_TABLE_TMPL({waveId:"air_"+s.idx,rows:e})),$("#wave_air_"+s.idx).DataTable({paging:!1,searching:!1,info:!1})),$("#wave_"+s.idx).append("<hr>")}}var NUM_ATTRS=12,EArmorType={LIGHT:1,MEDIUM:2,HEAVY:3,props:{1:{name:"Light Armor",value:1,code:"Light"},2:{name:"Medium Armor",value:2,code:"Medium"},3:{name:"Heavy Armor",value:4,code:"Heavy"}}},EAttributes={DURABILITY:0,CANNON:1,TORP:2,AA:3,AIR:4,RELOAD:5,ARMOR:6,HIT:7,EVA:8,SPEED:9,LUCK:10,ANTISUB:11,props:{0:{name:"Durability",value:0,code:"HP"},1:{name:"Firepower",value:1,code:"FP"},2:{name:"Torp",value:2,code:"TORP"},3:{name:"Anti-Air",value:3,code:"AA"},4:{name:"Airpower",value:4,code:"AP"},5:{name:"Reload",value:5,code:"REL"},6:{name:"Armor",value:6,code:"ARMOR"},7:{name:"Hit",value:7,code:"HIT"},8:{name:"Evasion",value:8,code:"EVA"},9:{name:"Speed",value:9,code:"SPD"},10:{name:"Luck",value:10,code:"LUCK"},11:{name:"Antisub",value:11,code:"ASW"}}},EWeaponType={MAIN_CANNON:1,SUB_CANNON:2,TORPEDO:3,ANTI_AIR:4,ARMOR:5,ENGINE:6,RADAR:7,PASSIVE_SCOUT:10,SCOUT:11,CREW:12,CHARGE:13,SPECIAL:14,MEGA_CHARGE:15,MANUAL_TORPEDO:16,ANTI_SEA:17,HAMMER_HEAD:18,BOMBER_PRE_CAST_ALERT:19,MULTI_LOCK:20,MANUAL_SUB:21,FLEET_ANTI_AIR:22,POINT_HIT_AND_LOCK:23,BEAM:24,DEPTH_CHARGE:25,REPEATER_ANTI_AIR:26,DISPOSABLE_TORPEDO:27,PREVIEW_ARICRAFT:99,AIR_ASSIST:100},EConditionType={AND:0,OR:1},EWaveTriggerType={NORMAL:0,TIMER:1,RANGE:2,STORY:3,AID:4,BGM:5,GUIDE:6,CAMERA:7,CLEAR:8,JAMMING:9};function loadEnemy(t){if(!(t in WAVE_DB.enemies))return console.log("No enemy with id "+t),null;let s=WAVE_DB.enemies[t],i=null;if("base"in s){let t=s.base;i=WAVE_DB.enemies[t]}return{base:i,enemy:s}}function loadIfExistsD(t,s,i){return s in t?t[s]:i}function calcStat(t,s,i,a){return t>100?s+(t-1)*i/1e3+(t-100)*a/1e3:s+(t-1)*i/1e3}class Enemy{constructor(t,s){this.id=t,this.lvl=s,this.icon=null,this.name="",this.type=-1,this.nation=-1,this.armor=0,this.weight=0,this.stats=[],this.attrs=[],this.attrsGrowth=[];for(let t=0;t<NUM_ATTRS;t++)this.attrs[t]=0,this.attrsGrowth[t]=0,this.stats[t]=0;this.aircraft=[],this.loadData(t),this.setLevel(s),this.loadAircraft()}getLevel(){return this.lvl}getStat(t){return this.stats[t]}getCombatStat(t){return this.stats[t]}getArmor(){return this.armor}getType(){return this.type}getNation(){return this.nation}getFixedAmmo(t){return null}loadStats(t){this.attrs=t.stats,this.attrsGrowth=t.growth,this.name=loadIfExistsD(t,"name",this.name),this.icon=loadIfExistsD(t,"icon",this.icon),this.nation=loadIfExistsD(t,"nation",this.nation),this.type=loadIfExistsD(t,"type",this.type),this.armor=loadIfExistsD(t,"armorType",this.armor),this.weight=loadIfExistsD(t,"weight",this.weight),this.eqs=loadIfExistsD(t,"equips",[])}loadData(t){let s=loadEnemy(t);this.data=s;let i=s.base;i&&this.loadStats(i),this.loadStats(s.enemy)}loadAircraft(){for(let t=0;t<this.eqs.length;t++){let s=new Aircraft(this.eqs[t],this.lvl,!0);s.fromMother(this.eqs[t],this)&&this.aircraft.push(s)}}getAircraft(){return this.aircraft}calcStats(){for(let t=0;t<NUM_ATTRS;t++)this.stats[t]=Math.floor(calcStat(this.lvl,this.attrs[t],this.attrsGrowth[t],0))}setLevel(t){this.lvl=t,this.calcStats()}isEnemy(){return!0}getTagList(){return[]}isVanguard(){return!1}isMainFleet(){return!1}isFlagship(){return!1}isLeader(){return!1}getTemplId(){return this.id}isType(t){return 0!=(this.type&t)}airResist(){return(100*(1-150/(150+this.stats[EAttributes.AA]))).toFixed(2)}getEntry(){let t="";return this.isBoss?t+="Boss":this.isReinf?t+=(""!=t?"\n":"")+"Reinforcement":t="-",["<div style='width:40px; height:40px;'><img src='img/enemy-icons/"+this.icon+".png' style='width:40px;' /></div>",this.name,this.lvl,this.stats[EAttributes.DURABILITY],EArmorType.props[this.armor].code,this.stats[EAttributes.CANNON],this.stats[EAttributes.TORP],this.stats[EAttributes.AIR],"<a class='material-tooltip-main' style='border-bottom: 1px dashed;' data-toggle='tooltip' title='"+this.airResist()+"% air resistance'>"+this.stats[EAttributes.AA]+"</a>",this.stats[EAttributes.EVA],this.stats[EAttributes.HIT],this.stats[EAttributes.LUCK],this.weight,t]}getStruct(){let t={};return t.icon="img/enemy-icons/"+this.icon+".png",t.name=this.name,t.lvl=this.lvl,t.hp=this.stats[EAttributes.DURABILITY],t.armor=EArmorType.props[this.armor].code,t.fp=this.stats[EAttributes.CANNON],t.torp=this.stats[EAttributes.TORP],t.avi=this.stats[EAttributes.AIR],t.aa=this.stats[EAttributes.AA],t.eva=this.stats[EAttributes.EVA],t.hit=this.stats[EAttributes.HIT],t.luck=this.stats[EAttributes.LUCK],t.prio=this.weight,t.notes="-",this.isBoss&&(t.notes="Boss"),t.airRed=this.airResist(),t}}function loadAircraft(t){if(!(t in WAVE_DB.aircrafts))return console.log("No aircraft with id "+t),null;return WAVE_DB.aircrafts[t]}function loadWeapon(t){if(!(t in WAVE_DB.weaps))return console.log("No weapon with id "+t),null;return WAVE_DB.weaps[t]}class Aircraft{constructor(t,s,i){this.id=t,this.lvl=s,this.icon=null,this.mother=null,this.fromCV=i,this.name="",this.type=-1,this.stats=[],this.attrs=[],this.attrsGrowth=[];for(let t=0;t<NUM_ATTRS;t++)this.attrs[t]=0,this.attrsGrowth[t]=0,this.stats[t]=0;this.weapons=[]}airResist(){return(100*(1-150/(150+this.attrs[EAttributes.AA]))).toFixed(2)}fromAirfighters(t){this.id=t.id;let s=loadAircraft(this.id);this.loadAircraftData(s),"weaponId"in t&&(this.weapons=t.weaponId),this.interval=t.int,this.once=t.once,this.total=t.total,this.setStatsAirFighter(),this.numPlanes=this.once}fromMother(t,s){this.mother=s;let i=loadWeapon(t);if(i.type!=EWeaponType.SCOUT)return!1;{this.loadWeaponData(i);let s=loadAircraft(t);this.loadAircraftData(s)}return this.setStatsMother(),!0}loadAircraftData(t){this.type=t.type,this.icon=t.icon,this.crash=t.crash,this.attPower=t.attPower,this.speed=t.speed,this.acc=t.accuracy,this.maxHp=t.maxHp,this.apGrowth=t.apGrowth,this.hpGrowth=t.hpGrowth,this.accGrowth=t.accGrowth,this.weapons=t.weapons}loadWeaponData(t){this.rel=t.rel,this.numPlanes=t.bullets[0].r}isFromMother(){return null!=this.mother}setStatsAirFighter(){let t=this.lvl-1;this.attrs[EAttributes.DURABILITY]=Math.floor(this.maxHp+this.hpGrowth*t/1e3);let s=this.attPower+this.apGrowth*t/1e3;this.attrs[EAttributes.CANNON]=s,this.attrs[EAttributes.TORP]=s,this.attrs[EAttributes.AA]=s,this.attrs[EAttributes.AIR]=s,this.attrs[EAttributes.ANTISUB]=s,this.attrs[EAttributes.RELOAD]=0,this.attrs[EAttributes.EVA]=0,this.attrs[EAttributes.LUCK]=50,this.attrs[EAttributes.HIT]=this.acc+this.accGrowth*t/1e3}setStatsMother(){if(null==this.mother)return;for(let t=0;t<NUM_ATTRS;t++)this.attrs[t]=this.mother.stats[t];let t=this.mother.lvl;this.lvl=t;let s=t-1;this.attrs[EAttributes.DURABILITY]=Math.floor(this.maxHp+this.hpGrowth*s/1e3),this.attrs[EAttributes.CANNON]=this.mother.stats[EAttributes.AIR],this.attrs[EAttributes.TORP]=this.mother.stats[EAttributes.AIR],this.attrs[EAttributes.AA]=this.mother.stats[EAttributes.AIR]}getStruct(){let t={};return t.icon="img/aircraft-icons/"+this.icon+".png",t.crash=this.crash,t.name=this.name,t.lvl=this.lvl,t.num=this.numPlanes,t.hp=this.attrs[EAttributes.DURABILITY],t.fp=this.attrs[EAttributes.CANNON],t.avi=this.attrs[EAttributes.AIR],t.aa=this.attrs[EAttributes.AA],t.hit=this.attrs[EAttributes.HIT],t.luck=this.attrs[EAttributes.LUCK],t.speed=this.speed,t.notes="-",t.airRed=this.airResist(),null!=this.mother?t.notes=ENEMY_ICON({icon:this.mother.icon}):t.notes=`Total of ${this.total/this.once} wave(s) of ${this.once} units.`,t}}class Wave{constructor(t,s){this.id=t,this.lvl=s,this.triggerType=-1,this.preWaves=[],this.spawns=[],this.reinf=[],this.aircraft=[],this.time=-1,this.waveConds=[],this.timeCond=-1}fromData(t){this.id=t.waveIndex,this.triggerType=t.triggerType,this.triggerType==EWaveTriggerType.TIMER?this.time=t.time:this.triggerType==EWaveTriggerType.NORMAL&&(this.preWaves=t.preWaves,this.loadSpawns(t))}loadConditions(t){if(this.preWaves.length>0)for(let t=0;t<this.preWaves.length;t++){let s=this.preWaves[t],i=WAVE_DICT[s];i&&i.triggerType==EWaveTriggerType.NORMAL?this.waveConds.push(i.idx):i&&i.triggerType==EWaveTriggerType.TIMER&&-1==this.timeCond&&(this.timeCond=i.time)}}getConditions(){return{time:this.timeCond,waves:this.waveConds}}getEnemyRows(){let t=[];for(let s=0;s<this.spawns.length;s++)t.push(this.spawns[s].getStruct());return t.map(ENEMY_ROW).join("")}getReinfRows(){let t=[];for(let s=0;s<this.reinf.length;s++)t.push(this.reinf[s].getStruct());return t.map(ENEMY_ROW).join("")}getAirRows(){let t=[];for(let s=0;s<this.aircraft.length;s++)t.push(this.aircraft[s].getStruct());return t.map(AIRCRAFT_ROW).join("")}loadSpawns(t){let s=t.spawns;for(let t=0;t<s.length;t++){let i=s[t].id,a=s[t].b,e=new Enemy(i,this.lvl);e.isBoss=a,this.spawns.push(e)}let i=t.reinforcements;for(let t=0;t<i.length;t++){let s=i[t].id,a=i[t].b,e=new Enemy(s,this.lvl);e.isBoss=a,this.reinf.push(e)}let a=t.fighters;for(let t=0;t<a.length;t++){let s=a[t],i=new Aircraft(s.id,this.lvl,!1);i.fromAirfighters(s),this.aircraft.push(i)}for(let t=0;t<this.spawns.length;t++){let s=this.spawns[t].getAircraft();for(let t=0;t<s.length;t++)this.aircraft.push(s[t])}}}function loadDungeon(t){if(!(t in WAVE_DB.dungs))return console.log("No dungeon with id "+t),null;return WAVE_DB.dungs[t]}